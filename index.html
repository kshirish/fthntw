<!DOCTYPE html>
<html>
	<head>
		<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<style>
			[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
			  display: none !important;
			}
			.chip {
				cursor: pointer;
			}
			.chip.selected {
				background-color: #26a69a;
				color: #fff; 
			}
		</style>
	</head>
	<body ng-app="fthntw">

		<div class="container" ng-controller="PageController" ng-cloak>
			<div class="row">
				<div class="col s12">
					<h1>Films that Harish needs to watch!</h1>
				</div>
				<div class="col s12">
					<div class="chip" ng-click="genreClick(item.genre)" ng-class="{selected: item.genre === selectedGenre}" ng-repeat="item in items">{{item.genre}}</div>
				</div>
				<div class="col s12">
					<ul class="collection with-header" ng-repeat="item in items | filter : { genre : selectedGenre }">
				        <li class="collection-header"><h4>{{item.genre}}</h4></li>
				        <li class="collection-item" ng-repeat="film in item.films">
				        	<p><input type="checkbox" id="{{$index}}"/><label for="{{$index}}">{{film}}</label></p>
				        </li>
				    </ul>
				</div>
			</div>
		</div>

		<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular.min.js"></script>
		<script>

			function getLocal(key) {
				return JSON.parse(localStorage.getItem('watched') || '[]');
			}

			function setLocal(key, arr) {
				localStorage.setItem(key, JSON.stringify(arr));
			}

			var watched = getLocal('watched'); 

			angular.module('fthntw', [])
				.controller('PageController', ['$scope', function($scope) {
					
					$scope.selectedGenre = 'All';

					$scope.items = [{
						genre: 'All',
						films: [
							'American History X',
							'Detachment',
							'Stuart - A Life Backwards',
							'Blue',
							'Red',
							'White',
							'The Pianist',
							'Warrior'
						]
					}, {
						genre: 'Drama',
						films: [													
							'American History X',
							'Detachment',
							'Blue',
							'Red',
							'White',
							'The Pianist',
							'Warrior'	
						]
					}, {
						genre: 'Romance',
						films: []
					}, {
						genre: 'Biography',
						films: [
							'Stuart - A Life Backwards',
							'The Pianist'
						]
					}, {
						genre: 'Thriller',
						films: []
					}, {
						genre: 'Documentry',
						films: []
					}];

					$scope.genreClick = function(genre) {
						$scope.selectedGenre = genre;
					};
				}]);
		</script>
	</body>
</html>